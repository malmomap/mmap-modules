<!DOCTYPE html>
<html>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <head>
        <style>
        /*

        Google Code style (c) Aahan Krish <geekpanth3r@gmail.com>

        */

        .hljs {
          display: block;
          overflow-x: auto;
          padding: 0.5em;
          background: white;
          color: black;
        }

        .hljs-comment,
        .hljs-quote {
          color: #800;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-section,
        .hljs-title,
        .hljs-name {
          color: #008;
        }

        .hljs-variable,
        .hljs-template-variable {
          color: #660;
        }

        .hljs-string,
        .hljs-selector-attr,
        .hljs-selector-pseudo,
        .hljs-regexp {
          color: #080;
        }

        .hljs-literal,
        .hljs-symbol,
        .hljs-bullet,
        .hljs-meta,
        .hljs-number,
        .hljs-link {
          color: #066;
        }

        .hljs-title,
        .hljs-doctag,
        .hljs-type,
        .hljs-attr,
        .hljs-built_in,
        .hljs-builtin-name,
        .hljs-params {
          color: #606;
        }

        .hljs-attribute,
        .hljs-subst {
          color: #000;
        }

        .hljs-formula {
          background-color: #eee;
          font-style: italic;
        }

        .hljs-selector-id,
        .hljs-selector-class {
          color: #9B703F
        }

        .hljs-addition {
          background-color: #baeeba;
        }

        .hljs-deletion {
          background-color: #ffc8bd;
        }

        .hljs-doctag,
        .hljs-strong {
          font-weight: bold;
        }

        .hljs-emphasis {
          font-style: italic;
        }

        /* sweco addons */
        body {
          font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
          font-size: 16px;
        }
        code {
          background-color: rgba(193, 193, 193, 0.32);
        }
        table, th, td {
           border: 1px solid black;
        }
        table {
            border-collapse: collapse;
        }
        td, th {
          padding: 5px;
        }
        </style>
        <title></title>
    </head>
    <body>
        <hr>
<h3 id="nyheter-module-copyright-sweco-position-ab-malm-stad">Nyheter module, copyright Sweco Position AB / Malmö Stad</h3>
<h4 id="description-">Description:</h4>
<p>This is a dialog-box containing information which will appear when a Spatialsuite or CSM map is loaded. This information can be adjusted by administrators in a config file and there is also a &quot;do not show again&quot; feature.
Different maps can have define different texts.</p>
<p>Terms:
[profile] refers to the profile name of the map. If a map is called MmapGatukontoret and is based on a mmapgatukontoret.xml file then [profile] = mmapgatukontoret</p>
<p>![image of Nyheter module] (<a href="https://github.com/malmomap/mmap-modules/blob/master/Images/newsdialog.png">https://github.com/malmomap/mmap-modules/blob/master/Images/newsdialog.png</a>)</p>
<p>![image of Nyheter module] (<a href="http://github.com/malmomap/mmap-modules/blob/master/Images/newsdialog.png">http://github.com/malmomap/mmap-modules/blob/master/Images/newsdialog.png</a>)</p>
<h4 id="changelog-">Changelog:</h4>
<table>
<thead>
<tr>
<th style="text-align:left">Date</th>
<th style="text-align:left">Version</th>
<th style="text-align:left">Ini</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2016-12-06</td>
<td style="text-align:left">0.1.0</td>
<td style="text-align:left">NARI</td>
<td style="text-align:left">init-Nyheter project</td>
</tr>
<tr>
<td style="text-align:left">2017-04-05</td>
<td style="text-align:left">0.2.0</td>
<td style="text-align:left">RAYT</td>
<td style="text-align:left">Use create a pop-up with latest information at start. Tool ready to be accepted for acceptence test</td>
</tr>
<tr>
<td style="text-align:left">2017-04-19</td>
<td style="text-align:left">0.3.0</td>
<td style="text-align:left">RAYT</td>
<td style="text-align:left">Ability to change font size for text and header now added</td>
</tr>
<tr>
<td style="text-align:left">2017-04-26</td>
<td style="text-align:left">0.4.0</td>
<td style="text-align:left">RAYT</td>
<td style="text-align:left">Ability to override &quot;do not show again&quot; based on dates now added</td>
</tr>
<tr>
<td style="text-align:left">2017-05-05</td>
<td style="text-align:left">0.5.0</td>
<td style="text-align:left">RAYT</td>
<td style="text-align:left">Messageboxes at profile and site level now available. Also one can have just messages and remove news box at both global and local level. There is also other small improvements</td>
</tr>
<tr>
<td style="text-align:left">2017-05-09</td>
<td style="text-align:left">0.6.0</td>
<td style="text-align:left">RAYT</td>
<td style="text-align:left">New way of forcing the newsbox after &quot;do not show again&quot; is clicked by user. Repositing of information boxes with other small changes</td>
</tr>
</tbody>
</table>
<h2 id="install">Install</h2>
<ol>
<li><p>Include module in module init file <code>[site]\appbase\spatialmap\WEB-INF\config\modules.ini.xml</code></p>
<pre><code class="lang-xml">   &lt;<span class="hljs-function"><span class="hljs-keyword">module</span> <span class="hljs-title">name</span>=</span><span class="hljs-string">"mmap-Nyheter"</span> dir=<span class="hljs-string">"custom/mmap-Nyheter"</span> permissionlevel=<span class="hljs-string">"public"</span> /&gt;
</code></pre>
</li>
<li><p>Define tool in profile:
<code>[site]\appbase\spatialmap\WEB-INF\config\profiles\[profile].xml</code></p>
</li>
</ol>
<pre><code class="lang-xml">  &lt;tool <span class="hljs-function"><span class="hljs-keyword">module</span>=</span><span class="hljs-string">"mmap-Nyheter"</span> name=<span class="hljs-string">"mmap-Nyheter"</span> ignore=<span class="hljs-string">"not ModuleDefined('mmap-Nyheter')"</span> /&gt;
</code></pre>
<ol>
<li>To administrate the tool and alter the configurations
<code>[site]\appbase\spatialmap\WEB-INF\config\mmap-config\modules\mmap-Nyheter\config.js</code></li>
</ol>
<pre><code><span class="hljs-tag">It</span> <span class="hljs-tag">is</span> <span class="hljs-tag">recommended</span> <span class="hljs-tag">to</span> <span class="hljs-tag">use</span> <span class="hljs-tag">Notepad</span> <span class="hljs-tag">editor</span>++ (utf-<span class="hljs-number">8</span>) <span class="hljs-keyword">when</span> defining this file as there can be problems with ÄÖÅ characters.


mMap[<span class="hljs-string">'mmap-Nyheter-config'</span>] = {
  <span class="hljs-comment">// ------------------------------[site]-----------------</span>
  <span class="hljs-attribute">globalWarning</span>: <span class="hljs-string">'This is a global warning'</span>, <span class="hljs-comment">// The global message that is to be displayed</span>
  <span class="hljs-attribute">globalWarningHeader</span>: <span class="hljs-string">'Important!'</span>, <span class="hljs-comment">// The header shown on the warning message</span>
  <span class="hljs-attribute">globalWarningStatus</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False If true then this will be shown on all profiles that have MmapNyheter installed.</span>
  <span class="hljs-attribute">globalNyheterStatus</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False If false then this will disable all Mmap nyheter on site.</span>
  <span class="hljs-comment">// ------------------------------this is for test_ray-----------------</span>
  <span class="hljs-attribute">profile_malmogk_ray_status</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False. If false then MmapNyheter will not be shown</span>
  <span class="hljs-attribute">profile_malmogk_ray_warning</span>: <span class="hljs-string">'Server is down!'</span>, <span class="hljs-comment">// Message to be displayed in the warning message</span>
  <span class="hljs-attribute">profile_malmogk_ray_warningHeader</span>: <span class="hljs-string">'News!'</span>, <span class="hljs-comment">//The header of the warning Message</span>
  <span class="hljs-attribute">profile_malmogk_ray_warningStatus</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False // If true then the message will be shown</span>
  <span class="hljs-attribute">profile_malmogk_ray_info</span>: <span class="hljs-string">'This is a test profile. Get outta here'</span>, <span class="hljs-comment">// An information pop up that will be shown once the profile is loaded</span>
  <span class="hljs-attribute">profile_malmogk_ray_infoStatus</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// if true then the information pop up will be shown</span>
  [profile]<span class="hljs-attribute">_title</span>: <span class="hljs-string">'Nyheter!'</span>,
  [profile]<span class="hljs-attribute">_nyheter1</span>: <span class="hljs-string">'Farthinder på gång'</span>,
  [profile]<span class="hljs-attribute">_nyheter2</span>: <span class="hljs-string">'Övergångställe ska vara klar i slutet av februari'</span>,
  [profile]<span class="hljs-attribute">_nyheter3</span>: <span class="hljs-string">'GCM passage arbetet har inte börjat'</span>,
  [profile]<span class="hljs-attribute">_nyheter4</span>: <span class="hljs-string">'3.12 version ska komma ut i april 2018'</span>,
  [profile]<span class="hljs-attribute">_nyheter5</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_nyheter6</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_nyheter7</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_nyheter8</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_nyheter9</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_nyheter10</span>: <span class="hljs-string">''</span>,
  [profile]<span class="hljs-attribute">_closeButton</span>: <span class="hljs-string">'close'</span>,
  [profile]<span class="hljs-attribute">_newsFontSize</span>: <span class="hljs-string">'16px'</span>,
  [profile]<span class="hljs-attribute">_headerFontSize</span>: <span class="hljs-string">'18px'</span>,
  [profile]<span class="hljs-attribute">_version</span>: <span class="hljs-string">'1.1'</span>,
    <span class="hljs-comment">// ------------------------------[profile2]-----------------</span>
  [profile2]<span class="hljs-attribute">_status</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False</span>
  [profile2]<span class="hljs-attribute">_warning</span>: <span class="hljs-string">'Server is down!'</span>,
  [profile2]<span class="hljs-attribute">_warningHeader</span>: <span class="hljs-string">'News!'</span>,
  [profile2]<span class="hljs-attribute">_warningStatus</span>: <span class="hljs-string">'True'</span>, <span class="hljs-comment">// choose either True or False  </span>
  [profile2]<span class="hljs-attribute">_title</span>: <span class="hljs-string">'Nyheter!'</span>,
  [profile2]<span class="hljs-attribute">_nyheter1</span>: <span class="hljs-string">'Nya funktioner ute i april'</span>,
  [profile2]<span class="hljs-attribute">_nyheter2</span>: <span class="hljs-string">'Vi ska bearbete hur vi jobbar med cykelvägar'</span>,
  [profile2]<span class="hljs-attribute">_nyheter3</span>: <span class="hljs-string">'GCM passage kommer i maj'</span>,
  [profile2]<span class="hljs-attribute">_nyheter4</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter5</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter6</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter7</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter8</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter9</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_nyheter10</span>: <span class="hljs-string">''</span>,
  [profile2]<span class="hljs-attribute">_closeButton</span>: <span class="hljs-string">'stäng'</span>,
  [profile]<span class="hljs-attribute">_newsFontSize</span>: <span class="hljs-string">'12px'</span>,
  [profile]<span class="hljs-attribute">_headerFontSize</span>: <span class="hljs-string">'14px'</span>,
  [profile]<span class="hljs-attribute">_date</span>: <span class="hljs-string">'26/04/2017'</span>,
}
</code></pre><h2 id="configuration">Configuration</h2>
<p>The default fetched config will be the template config in <code>[module]/config/config_template.js</code>. To override the default configuration, copy and rename the default config from <code>[module]/config/config_template.js</code> to <code>[cbinfo.config.dir]/mmap-config/modules/mmap-mockup/config.js</code>. The new config.js will deploy on top of the default configuration.</p>
<h5 id="configuration-parameters">Configuration parameters</h5>
<table>
<thead>
<tr>
<th style="text-align:left">Parameter</th>
<th style="text-align:left">Default value</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">globalWarning:</td>
<td style="text-align:left">&#39;This is a global warning&#39;</td>
<td style="text-align:left">The message that will appear on all profiles (with module installed) on site</td>
</tr>
<tr>
<td style="text-align:left">globalWarningHeader:</td>
<td style="text-align:left">&#39;True&#39;</td>
<td style="text-align:left">An opportunity to not show the newsbox if set to false</td>
</tr>
<tr>
<td style="text-align:left">globalWarningStatus:</td>
<td style="text-align:left">&#39;Important!&#39;</td>
<td style="text-align:left">Title to be placed on the global message</td>
</tr>
<tr>
<td style="text-align:left">globalNyheterStatus:</td>
<td style="text-align:left">&#39;True&#39;</td>
<td style="text-align:left">Removes the news dialogbox from all profiles on site where installed if set to false</td>
</tr>
<tr>
<td style="text-align:left">[profile]_status:</td>
<td style="text-align:left">&#39;True&#39;</td>
<td style="text-align:left">An opportunity to not show the newsbox if set to false</td>
</tr>
<tr>
<td style="text-align:left">[profile]_warning:</td>
<td style="text-align:left">&#39;Server is down!&#39;</td>
<td style="text-align:left">This is the message that will appear on the site level warning</td>
</tr>
<tr>
<td style="text-align:left">[profile]_warningHeader:</td>
<td style="text-align:left">&#39;Update&#39;</td>
<td style="text-align:left">This will be the title of the warning feature</td>
</tr>
<tr>
<td style="text-align:left">[profile]_warningStatus:</td>
<td style="text-align:left">&#39;True!</td>
<td style="text-align:left">Set to true if the warning message is to be visible otherwise false</td>
</tr>
<tr>
<td style="text-align:left">[profile]_info:</td>
<td style="text-align:left">&#39;Map is currently undergoing changes&#39;</td>
<td style="text-align:left">Info message to be displayed</td>
</tr>
<tr>
<td style="text-align:left">[profile]_infoStatus:</td>
<td style="text-align:left">&#39;False&#39;</td>
<td style="text-align:left">Information message will not be displayed</td>
</tr>
<tr>
<td style="text-align:left">[profile]_title:</td>
<td style="text-align:left">&#39;News!&#39;</td>
<td style="text-align:left">This will feature on the header</td>
</tr>
<tr>
<td style="text-align:left">[profile]_nyheter1</td>
<td style="text-align:left">&#39;New version launched next month&#39;</td>
<td style="text-align:left">The first line of text that will appear</td>
</tr>
<tr>
<td style="text-align:left">[profile]_nyheter9</td>
<td style="text-align:left">&#39;GIS workshops will be held on the 15th&#39;</td>
<td style="text-align:left">The ninth line of text that will appear</td>
</tr>
<tr>
<td style="text-align:left">[profile]_nyheter10</td>
<td style="text-align:left"></td>
<td style="text-align:left">Any line which is left empty will be automatically removed. At the moment there is a maximum of 10 lines.</td>
</tr>
<tr>
<td style="text-align:left">[profile]_closeButton</td>
<td style="text-align:left">&#39;Close&#39;</td>
<td style="text-align:left">The text that will appear on the button that closes the information box</td>
</tr>
<tr>
<td style="text-align:left">[profile]_newsFontSize</td>
<td style="text-align:left">&#39;26px&#39;</td>
<td style="text-align:left">The size of the text</td>
</tr>
<tr>
<td style="text-align:left">[profile]_headerFontSize</td>
<td style="text-align:left">&#39;30px&#39;</td>
<td style="text-align:left">The size of the header text</td>
</tr>
<tr>
<td style="text-align:left">[profile2]_version</td>
<td style="text-align:left">&#39;1.1&#39;</td>
<td style="text-align:left">&#39;If this is changed&#39;</td>
</tr>
<tr>
<td style="text-align:left">[profile2]_title:</td>
<td style="text-align:left">&#39;Latest information&#39;</td>
<td style="text-align:left">This will feature on the header for a second profile</td>
</tr>
<tr>
<td style="text-align:left">[profile2]_nyheter1</td>
<td style="text-align:left">&#39;New tool to provide information under development&#39;</td>
<td style="text-align:left">The first line of text that will appear on a second profile</td>
</tr>
<tr>
<td style="text-align:left">[profile2]_nyheter9</td>
<td style="text-align:left">&#39;Population data is been updated for 2017&#39;</td>
<td style="text-align:left">The ninth line of text that will appear on a second profile</td>
</tr>
<tr>
<td style="text-align:left">[profile2]_closeButton</td>
<td style="text-align:left">&#39;Shutdown&#39;</td>
<td style="text-align:left">The text that will appear on the button that closes the information box on a second profile</td>
</tr>
</tbody>
</table>
<h2 id="proposed-developments">Proposed developments</h2>
<p>After 90 days the information box will once again reappear after &quot;do not show again&quot; is clicked.
Appearance needs to be improved further.
This will probably need to be completely responsive in the near future, a redo with bootstrap is probably needed which is compatiable with mobile devices.</p>
<h2 id="contact">Contact</h2>
<p>Raymond Timlin raymond.timlin@malmo.se (Gatukontoret, Malmö Stad)</p>
<h4 id="dependencies-">Dependencies:</h4>
<p>Bootstrap - this is built in as an external library, jquery and toastr which are both already available within the Spatialsuite product.</p>
<h2 id="development-enviroment">Development enviroment</h2>
<p>Requires <a href="https://nodejs.org/en/">nodejs</a> installed.
Grunt-cli as a global package (only required to do once):</p>

    </body>
</html>
